{"version":3,"sources":["webpack://almost-dead-net/./src/pages/show-embed.js"],"names":["Guests","guests","length","map","guest","name","join","Set","show","which","isEncore","sets","performances","segues","teases","songs","setId","setData","find","propEq","setlist","normalizeSetlist","key","id","Show","pageContext","shows","venue","recordings","lastShowId","console","error","date","event","notes","guestsWithSplitShows","links","guestData","Number","isInteger","toString","split","filter","data","showGuests","where","includes","reduce","setlists","concat","encores","showName","location","className","title","description","soundcheck"],"mappings":"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","file":"component---src-pages-show-embed-js-a9ff8f461456490607fa.js","sourcesContent":["import React, {useEffect, useState} from 'react'\nimport {filter, find, includes, propEq, sort, where} from 'ramda'\nimport {Link} from 'gatsby'\nimport slugify from 'slugify'\n\nimport SEO from \"../components/seo\"\nimport Layout from '../components/layout'\nimport Setlist from '../components/setlist'\nimport Recording from '../components/recording'\n\nimport {normalizeSetlist} from '../components/helpers/setlist-helper'\n\nimport './show-embed.css'\n\nfunction Guests({guests}) {\n  if (guests.length) {\n    return <p>With {guests.map((guest) => guest.name).join(', ')}</p>\n  }\n  return false\n}\n\nfunction Set({show, which, isEncore = false, sets, performances, segues, teases, songs}) {\n  const what = which === 'soundcheck'\n    ? 'soundcheck'\n    : `${isEncore ? 'encore' : 'set'}${which}`\n  const setId = show[what]\n  if (!setId || !sets || !sets.length) {\n    return false\n  }\n  const setData = find(propEq('id', setId))(sets)\n  const setlist = normalizeSetlist(setData.setlist)\n  return <Setlist\n    isEncore={isEncore}\n    which={which}\n    key={setData.id}\n    setlist={setlist}\n    performances={performances}\n    segues={segues}\n    songs={songs}\n    teases={teases}\n  />\n}\n\nexport default function Show({pageContext: {show, shows, sets, venue, guests, recordings, performances, segues, songs, teases, lastShowId}}) {\n  if (!show) {\n    console.error('Show page, missing show..............')\n    return false\n  }\n\n  const {date, event, notes, links} = show\n\n  const guestsWithSplitShows = guests.map((guestData) => {\n    if (!guestData) {\n      return null\n    }\n    if (!guestData.shows) {\n      return null\n    }\n    if (Number.isInteger(guestData.shows)) {\n      return {\n        ...guestData,\n        shows: [guestData.shows.toString()]\n      }\n    }\n    return {\n      ...guestData,\n      shows: guestData.shows.split(':')\n    }\n  }).filter((data) => !!data)\n  const showGuests = filter(where({shows: includes(show.id)}))(guestsWithSplitShows)\n\n  const setlist = [1, 2, 3].reduce((setlists, which) => setlists.concat(\n    <Set which={which} show={show} performances={performances} sets={sets} segues={segues} teases={teases} songs={songs} />\n  ), [])\n  const encores = [1, 2].reduce((encores, which) => encores.concat(\n    <Set isEncore={true} which={which} show={show} performances={performances} sets={sets} segues={segues} teases={teases} songs={songs} />\n  ), [])\n\n  const showName = `${event ? `${event}, ` : ``}${venue.name} (${venue.location})`\n\n  // TODO set rel-canonical={`/show/${show.id}`}\n  return <div className=\"showpage-embed\">\n    <SEO\n      title={`JRAD ${date} @ ${showName}`}\n      description={`Joe Russo's Almost Dead${showGuests.length ? ` with ${showGuests.map((guest) => guest.name).join(' and ')}` : ''} at ${showName} ${date} â€” setlist, teases, recordings`}\n    />\n    <h1 className=\"showpage__pagetitle\">\n      <span className=\"showpage__pagetitle--date\">{date}</span> {' '}\n      {event && <span className=\"showpage__pagetitle--event\">{event}</span>} {' '}\n      {venue && <span className=\"showpage__pagetitle--venue\">{venue.name}, {venue.location}</span>}\n    </h1>\n    <section className=\"showpage__setlist\">\n      <Guests guests={showGuests} />\n      {show.soundcheck && <Set which=\"soundcheck\" show={show} performances={performances} sets={sets} segues={segues} teases={teases} songs={songs} />}\n      {setlist.length ? setlist : <p>Uh oh, no sets found.</p>}\n      {encores.length && encores}\n      {notes && <div className=\"showpage__notes\">{notes}</div>}\n    </section>\n  </div>\n}\n"],"sourceRoot":""}