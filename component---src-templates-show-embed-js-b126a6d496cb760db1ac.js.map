{"version":3,"sources":["webpack://almost-dead-net/./node_modules/classnames/index.js","webpack://almost-dead-net/./src/components/helpers/setlist-helper.js","webpack://almost-dead-net/./src/components/link-with-previous-url.js","webpack://almost-dead-net/./src/components/segue.js","webpack://almost-dead-net/./src/components/perf_note.js","webpack://almost-dead-net/./src/components/teases_note.js","webpack://almost-dead-net/./src/components/setlist.js","webpack://almost-dead-net/./src/templates/show-embed.js"],"names":["hasOwn","hasOwnProperty","classNames","classes","i","arguments","length","arg","argType","push","Array","isArray","inner","apply","toString","Object","prototype","key","call","join","module","exports","default","normalizeSetlist","rawSetlistValue","split","children","state","rest","Location","location","previousUrl","href","Segue","className","type","cssClasses","classnames","PerfNote","notes","Tooltip","title","trigger","aria-label","role","TeasesNote","list","text","map","song_name","findById","id","find","propEq","SetlistEntry","performanceData","songData","segues","teases","displayName","segueData","teasesArray","filter","url","song_id","highlight","endsWith","to","variation","isDebut","Setlist","props","setlist","performances","songs","isEncore","which","showId","allSets","allShows","showIdInt","Number","groupedBySuite","groupWith","a","b","suite","perfId","showsForThoseSets","perfData","set","includes","setData","show","soundcheck","set1","set2","set3","encore1","encore2","earlierShows","partition","showData","songOrSuite","lastSong","Guests","guests","guest","name","Set","sets","setId","ShowEmbed","data","showsCsv","venue","venuesCsv","allSetsCsv","nodes","allGuestsCsv","allSongperformancesCsv","allSeguesCsv","allSongsCsv","allTeasesCsv","console","error","date","event","guestsWithSplitShows","guestData","shows","isInteger","showGuests","where","reduce","setlists","concat","encores","showName","description","rel"],"mappings":"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","file":"component---src-templates-show-embed-js-b126a6d496cb760db1ac.js","sourcesContent":["/*!\n  Copyright (c) 2018 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n\n/* global define */\n(function () {\n  'use strict';\n\n  var hasOwn = {}.hasOwnProperty;\n\n  function classNames() {\n    var classes = [];\n\n    for (var i = 0; i < arguments.length; i++) {\n      var arg = arguments[i];\n      if (!arg) continue;\n      var argType = typeof arg;\n\n      if (argType === 'string' || argType === 'number') {\n        classes.push(arg);\n      } else if (Array.isArray(arg)) {\n        if (arg.length) {\n          var inner = classNames.apply(null, arg);\n\n          if (inner) {\n            classes.push(inner);\n          }\n        }\n      } else if (argType === 'object') {\n        if (arg.toString === Object.prototype.toString) {\n          for (var key in arg) {\n            if (hasOwn.call(arg, key) && arg[key]) {\n              classes.push(key);\n            }\n          }\n        } else {\n          classes.push(arg.toString());\n        }\n      }\n    }\n\n    return classes.join(' ');\n  }\n\n  if (typeof module !== 'undefined' && module.exports) {\n    classNames.default = classNames;\n    module.exports = classNames;\n  } else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n    // register as 'classnames', consistent with npm package name\n    define('classnames', [], function () {\n      return classNames;\n    });\n  } else {\n    window.classNames = classNames;\n  }\n})();","export function normalizeSetlist(rawSetlistValue) {\n  return typeof rawSetlistValue === \"number\"\n    ? [rawSetlistValue]\n    : typeof rawSetlistValue === \"string\"\n      ? rawSetlistValue.split(':')\n      : []\n}\n","import React from 'react'\nimport {Location} from '@reach/router'\nimport {Link} from 'gatsby'\n\nconst LinkWithPrevUrl = ({children, state, ...rest}) => (\n  <Location>\n    {({location}) =>\n      <Link {...rest} state={{previousUrl: location.href, ...state}}>\n        {children}\n      </Link>\n    }\n  </Location>\n)\n\nexport default LinkWithPrevUrl\n","import React from 'react'\nimport classnames from 'classnames'\n\nimport './segue.css'\n\n/**\n * Show a visual indication of the type of segue.\n * http://beta.phish.net/faq/segues\n */\nexport default function Segue({className = '', type}) {\n  const cssClasses = classnames(className, 'segue', {\n    'segue--std': type === '>',\n    'segue--smooth': type === '->',\n  })\n  // ripcord... â‰¯\n  return <span className={cssClasses}>{type}</span>\n}\n","import React from 'react'\nimport {Tooltip} from 'react-tippy'\n\nexport default function PerfNote({notes}) {\n  return <Tooltip title={notes} trigger=\"mouseenter focus click\">\n    <span className=\"setlist__songnote\" aria-label=\"notes\" role=\"img\">ðŸ““\n      <span className=\"hidden\">{notes}</span>\n    </span>\n  </Tooltip>\n}\n","import React from 'react'\n\nimport {Tooltip} from 'react-tippy'\n\nexport default function TeasesNote({list}) {\n  const teases = list.map(({song_name}) => song_name).join(', ')\n  const text = `${teases} tease${list.length > 1 ? 's' : ''}`\n  return <Tooltip title={text} trigger=\"mouseenter focus click\">\n    <span className=\"setlist__songteases\" aria-label=\"notes\" role=\"img\">ðŸŽ§\n      <span className=\"hidden\">{text}</span>\n    </span>\n  </Tooltip>\n}\n","import React from 'react'\nimport {filter, find, groupWith, partition, propEq} from 'ramda'\nimport classnames from 'classnames'\nimport {Tooltip} from 'react-tippy'\n\nimport Segue from './segue'\n//import BustOutBadge from './bust_out_badge'\n//import TimePlayedBadge from './time_played_badge'\nimport PerfNote from './perf_note'\nimport TeasesNote from './teases_note'\nimport Link from './link-with-previous-url'\n\nimport './setlist.css'\nimport 'react-tippy/dist/tippy.css'\n\nconst findById = (id) => find(propEq('id', id))\nconst filterBySongId = (id) => filter(propEq('song_id', id))\n\nfunction SetlistEntry({performanceData, songData, segues, teases, previousUrl}) {\n  const displayName = songData.title\n  const segueData = find(propEq('from_perf_id', performanceData.id))(segues)\n  const teasesArray = filter(propEq('performance_id', performanceData.id))(teases)\n  const url = `/song/${performanceData.song_id}`\n  return <li className={classnames('setlist__track', {highlight: previousUrl?.endsWith(url)})}>\n    <Link to={url}>\n      {displayName}\n    </Link>\n    {' '}\n    {performanceData.variation || false}\n    {segueData && <Segue {...segueData} />}\n    {performanceData.isDebut && <Tooltip title=\"first time played\" trigger=\"mouseenter focus click\">\n      <span className=\"setlist__track__badge setlist__track__badge--ftp\" aria-label=\"notes\" role=\"img\">ðŸ†•\n        <span className=\"hidden\">first time played</span>\n      </span>\n    </Tooltip>}\n    {/*<BustOutBadge showgap={Number(performanceData.showgap)} />*/}\n    {performanceData.notes && <PerfNote notes={performanceData.notes} />}\n    {teasesArray.length ? <TeasesNote list={teasesArray} /> : false}\n  </li>\n}\n\nexport default function Setlist(props) {\n  const {\n    setlist,\n    performances,\n    segues,\n    songs,\n    teases,\n    isEncore,\n    which,\n    showId,\n    allSets = [],\n    allShows = [],\n    previousUrl\n  } = props\n  if (!(performances && songs && segues && teases)) {\n    return <p>Loading...</p>\n  }\n  if (!performances.length) {\n    return <p>Uh oh, no sets found...</p>\n  }\n  if (!songs.length) {\n    return <p>Uh oh, no songs found...</p>\n  }\n  if (!segues.length) {\n    return <p>Uh oh, no segues found...</p>\n  }\n  if (!teases.length) {\n    return <p>Uh oh, no teases found...</p>\n  }\n  const showIdInt = Number(showId)\n  const groupedBySuite = groupWith(\n    (a, b) => a.suite && a.suite === b.suite,\n    setlist.map((perfId) => {\n      const performanceData = findById(perfId)(performances)\n      const songData = findById(performanceData.song_id)(songs)\n      const allPerfsOfThisSong = filterBySongId(songData.id)(performances)\n      const setsForAllPerfsOfThisSong = allPerfsOfThisSong.map(perfData => allSets.find(set => set.setlist.split(':').includes(perfData.id)))\n      const showsForThoseSets = setsForAllPerfsOfThisSong.map(setData => allShows.find(show => [show.soundcheck, show.set1, show.set2, show.set3, show.encore1, show.encore2].includes(setData.id)))\n      const [earlierShows] = partition(showData => Number(showData?.id) < showIdInt, showsForThoseSets)\n      if (allShows.length && !earlierShows.length)\n        performanceData.isDebut = true\n      return {\n        suite: songData.suite,\n        songData,\n        performanceData,\n      }\n    })\n  )\n  return <div className={`setlist__set setlist__set-${isEncore ? 'encore' : which}`}>\n    <h3 className=\"setlist__setlabel\">\n      {which === 'soundcheck'\n        ? 'Soundcheck'\n        : isEncore\n          ? `Encore ${which > 1 ? which : ''}`\n          : `Set ${which}`\n      }\n    </h3>\n    <ol className=\"setlist__tracks\">\n      {groupedBySuite.map((songOrSuite) => {\n        if (songOrSuite.length > 1) {\n          const lastSong = songOrSuite[songOrSuite.length - 1]\n          return <li key={songOrSuite[0].performanceData.id} className=\"suite\">\n            {songOrSuite[0].suite} suite\n            <ul>\n              {songOrSuite.map(({songData, performanceData}) => {\n                return <SetlistEntry\n                  key={performanceData.id}\n                  performanceData={performanceData}\n                  songData={songData}\n                  segues={segues}\n                  teases={teases}\n                  previousUrl={previousUrl}\n                />\n              })}\n            </ul>\n            {lastSong && lastSong.performanceData &&\n              <Segue {...find(propEq('from_perf_id', lastSong.performanceData.id))(segues)} className=\"suite__segue\" />}\n          </li>\n        }\n        // regularly scheduled programming\n        const [{performanceData, songData}] = songOrSuite\n        return <SetlistEntry\n          key={performanceData.id}\n          performanceData={performanceData}\n          songData={songData}\n          segues={segues}\n          teases={teases}\n          previousUrl={previousUrl}\n        />\n      })}\n    </ol>\n  </div>\n}\n","import React from 'react'\nimport {filter, find, includes, propEq, where} from 'ramda'\nimport {graphql} from 'gatsby'\nimport {Helmet} from 'react-helmet'\n\nimport SEO from \"../components/seo\"\nimport Setlist from '../components/setlist'\n\nimport {normalizeSetlist} from '../components/helpers/setlist-helper'\n\nimport './show-embed.css'\n\nfunction Guests({guests}) {\n  if (guests.length) {\n    return <p>With {guests.map((guest) => guest.name).join(', ')}</p>\n  }\n  return false\n}\n\nfunction Set({show, which, isEncore = false, sets, performances, segues, teases, songs}) {\n  const what = which === 'soundcheck'\n    ? 'soundcheck'\n    : `${isEncore ? 'encore' : 'set'}${which}`\n  const setId = show[what]\n  if (!setId || !sets || !sets.length) {\n    return false\n  }\n  const setData = find(propEq('id', setId))(sets)\n  const setlist = normalizeSetlist(setData.setlist)\n  return <Setlist\n    isEncore={isEncore}\n    which={which}\n    key={setData.id}\n    setlist={setlist}\n    performances={performances}\n    segues={segues}\n    songs={songs}\n    teases={teases}\n  />\n}\n\nexport default function ShowEmbed({data: {\n  showsCsv: show,\n  venuesCsv: venue,\n  allSetsCsv: {nodes: sets},\n  allGuestsCsv: {nodes: guests},\n  allSongperformancesCsv: {nodes: performances},\n  allSeguesCsv: {nodes: segues},\n  allSongsCsv: {nodes: songs},\n  allTeasesCsv: {nodes: teases},\n}}) {\n  if (!show) {\n    console.error('Show page, missing show..............')\n    return false\n  }\n\n  const {date, event, notes} = show\n\n  const guestsWithSplitShows = guests.map((guestData) => {\n    if (!guestData) {\n      return null\n    }\n    if (!guestData.shows) {\n      return null\n    }\n    if (Number.isInteger(guestData.shows)) {\n      return {\n        ...guestData,\n        shows: [guestData.shows.toString()]\n      }\n    }\n    return {\n      ...guestData,\n      shows: guestData.shows.split(':')\n    }\n  }).filter((data) => !!data)\n  const showGuests = filter(where({shows: includes(show.id)}))(guestsWithSplitShows)\n\n  const setlist = [1, 2, 3].reduce((setlists, which) => setlists.concat(\n    <Set which={which} show={show} performances={performances} sets={sets} segues={segues} teases={teases} songs={songs} />\n  ), [])\n  const encores = [1, 2].reduce((encores, which) => encores.concat(\n    <Set isEncore={true} which={which} show={show} performances={performances} sets={sets} segues={segues} teases={teases} songs={songs} />\n  ), [])\n\n  const showName = `${event ? `${event}, ` : ``}${venue.name} (${venue.location})`\n\n  return <div className=\"showpage-embed\">\n    <SEO\n      title={`JRAD ${date} @ ${showName}`}\n      description={`Joe Russo's Almost Dead${showGuests.length ? ` with ${showGuests.map((guest) => guest.name).join(' and ')}` : ''} at ${showName} ${date} â€” setlist, teases, recordings`}\n    />\n    <Helmet>\n      <link rel=\"canonical\" href={`/show/${show.id}`} />\n    </Helmet>\n    <h1 className=\"showpage__pagetitle\">\n      <span className=\"showpage__pagetitle--date\">{date}</span>\n      {' '}\n      {event && <span className=\"showpage__pagetitle--event\">{event}</span>}\n      {' '}\n      {venue && <span className=\"showpage__pagetitle--venue\">{venue.name}, {venue.location}</span>}\n    </h1>\n    <section className=\"showpage__setlist\">\n      <Guests guests={showGuests} />\n      {show.soundcheck && <Set which=\"soundcheck\" show={show} performances={performances} sets={sets} segues={segues} teases={teases} songs={songs} />}\n      {setlist.length ? setlist : <p>Uh oh, no sets found.</p>}\n      {encores.length && encores}\n      {notes && <div className=\"showpage__notes\">{notes}</div>}\n    </section>\n  </div>\n}\n\nexport const query = graphql`\n  query($showId: String!, $venueId: String!) {\n    showsCsv(id: {eq: $showId}) {\n      id\n      date\n      encore1\n      encore2\n      event\n      notes\n      set1\n      set2\n      set3\n    }\n    venuesCsv(id: {eq: $venueId}) {\n      id\n      location\n      name\n    }\n    allSetsCsv { nodes {\n      id\n      setlist\n    }}\n    allGuestsCsv { nodes {\n      id\n      name\n      shows\n    } }\n    allSongperformancesCsv { nodes {\n      id\n      next_perfid\n      notes\n      prev_perfid\n      showgap\n      song_id\n      variation\n    } }\n    allSongsCsv { nodes {\n      id\n      author\n      core_gd\n      core_jrad\n      suite\n      title\n    } }\n    allSeguesCsv { nodes {\n      id\n      from_perf_id\n      type\n    } }\n    allTeasesCsv { nodes {\n      id\n      performance_id\n      song_name\n    } }\n  }\n`\n"],"sourceRoot":""}