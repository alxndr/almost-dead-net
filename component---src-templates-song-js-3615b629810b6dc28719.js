/*! For license information please see component---src-templates-song-js-3615b629810b6dc28719.js.LICENSE.txt */
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[291],{9634:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,s(n)))}return e}function s(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=a(t,n));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},2530:function(e,t,n){"use strict";n.d(t,{A:function(){return d}});var r=n(2028);function o(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function s(e,t,n){for(var r=0,o=n.length;r<o;){if(e(t,n[r]))return!0;r+=1}return!1}var a=n(2659);var i="function"==typeof Object.is?Object.is:function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},u=n(4826),c=n(9908);function l(e,t,n,r){var a=o(e);function i(e,t){return f(e,t,n.slice(),r.slice())}return!s((function(e,t){return!s(i,t,e)}),o(t),a)}function f(e,t,n,r){if(i(e,t))return!0;var o,s,d=(0,c.A)(e);if(d!==(0,c.A)(t))return!1;if("function"==typeof e["fantasy-land/equals"]||"function"==typeof t["fantasy-land/equals"])return"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t)&&"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e);if("function"==typeof e.equals||"function"==typeof t.equals)return"function"==typeof e.equals&&e.equals(t)&&"function"==typeof t.equals&&t.equals(e);switch(d){case"Arguments":case"Array":case"Object":if("function"==typeof e.constructor&&"Promise"===(o=e.constructor,null==(s=String(o).match(/^function (\w*)/))?"":s[1]))return e===t;break;case"Boolean":case"Number":case"String":if(typeof e!=typeof t||!i(e.valueOf(),t.valueOf()))return!1;break;case"Date":if(!i(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(e.source!==t.source||e.global!==t.global||e.ignoreCase!==t.ignoreCase||e.multiline!==t.multiline||e.sticky!==t.sticky||e.unicode!==t.unicode)return!1}for(var h=n.length-1;h>=0;){if(n[h]===e)return r[h]===t;h-=1}switch(d){case"Map":return e.size===t.size&&l(e.entries(),t.entries(),n.concat([e]),r.concat([t]));case"Set":return e.size===t.size&&l(e.values(),t.values(),n.concat([e]),r.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var p=(0,u.A)(e);if(p.length!==(0,u.A)(t).length)return!1;var g=n.concat([e]),A=r.concat([t]);for(h=p.length-1;h>=0;){var v=p[h];if(!(0,a.A)(v,t)||!f(t[v],e[v],g,A))return!1;h-=1}return!0}var d=(0,r.A)((function(e,t){return f(e,t,[],[])}))},3286:function(e,t,n){"use strict";n.d(t,{A:function(){return c}});var r=n(2028),o=n(9489),s=n(3413),a=n(8752),i=function(){function e(e,t){this.xf=t,this.f=e,this.found=!1}return e.prototype["@@transducer/init"]=a.A.init,e.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,void 0)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.found=!0,e=(0,s.A)(this.xf["@@transducer/step"](e,t))),e},e}();function u(e){return function(t){return new i(e,t)}}var c=(0,r.A)((0,o.A)(["find"],u,(function(e,t){for(var n=0,r=t.length;n<r;){if(e(t[n]))return t[n];n+=1}})))},8725:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var r=n(6970);function o(e){return function t(n){return 0===arguments.length||(0,r.A)(n)?t:e.apply(this,arguments)}}},2028:function(e,t,n){"use strict";n.d(t,{A:function(){return s}});var r=n(8725),o=n(6970);function s(e){return function t(n,s){switch(arguments.length){case 0:return t;case 1:return(0,o.A)(n)?t:(0,r.A)((function(t){return e(n,t)}));default:return(0,o.A)(n)&&(0,o.A)(s)?t:(0,o.A)(n)?(0,r.A)((function(t){return e(t,s)})):(0,o.A)(s)?(0,r.A)((function(t){return e(n,t)})):e(n,s)}}}},131:function(e,t,n){"use strict";n.d(t,{A:function(){return a}});var r=n(8725),o=n(2028),s=n(6970);function a(e){return function t(n,a,i){switch(arguments.length){case 0:return t;case 1:return(0,s.A)(n)?t:(0,o.A)((function(t,r){return e(n,t,r)}));case 2:return(0,s.A)(n)&&(0,s.A)(a)?t:(0,s.A)(n)?(0,o.A)((function(t,n){return e(t,a,n)})):(0,s.A)(a)?(0,o.A)((function(t,r){return e(n,t,r)})):(0,r.A)((function(t){return e(n,a,t)}));default:return(0,s.A)(n)&&(0,s.A)(a)&&(0,s.A)(i)?t:(0,s.A)(n)&&(0,s.A)(a)?(0,o.A)((function(t,n){return e(t,n,i)})):(0,s.A)(n)&&(0,s.A)(i)?(0,o.A)((function(t,n){return e(t,a,n)})):(0,s.A)(a)&&(0,s.A)(i)?(0,o.A)((function(t,r){return e(n,t,r)})):(0,s.A)(n)?(0,r.A)((function(t){return e(t,a,i)})):(0,s.A)(a)?(0,r.A)((function(t){return e(n,t,i)})):(0,s.A)(i)?(0,r.A)((function(t){return e(n,a,t)})):e(n,a,i)}}}},9489:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var r=n(2290);function o(e,t,n){return function(){if(0===arguments.length)return n();var o=arguments[arguments.length-1];if(!(0,r.A)(o)){for(var s=0;s<e.length;){if("function"==typeof o[e[s]])return o[e[s]].apply(o,Array.prototype.slice.call(arguments,0,-1));s+=1}if(function(e){return null!=e&&"function"==typeof e["@@transducer/step"]}(o))return t.apply(null,Array.prototype.slice.call(arguments,0,-1))(o)}return n.apply(this,arguments)}}},2659:function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(t,e)}n.d(t,{A:function(){return r}})},2290:function(e,t){"use strict";t.A=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)}},6970:function(e,t,n){"use strict";function r(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}n.d(t,{A:function(){return r}})},3413:function(e,t,n){"use strict";function r(e){return e&&e["@@transducer/reduced"]?e:{"@@transducer/value":e,"@@transducer/reduced":!0}}n.d(t,{A:function(){return r}})},8752:function(e,t){"use strict";t.A={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}}},4826:function(e,t,n){"use strict";n.d(t,{A:function(){return d}});var r=n(8725),o=n(2659),s=Object.prototype.toString,a=function(){return"[object Arguments]"===s.call(arguments)?function(e){return"[object Arguments]"===s.call(e)}:function(e){return(0,o.A)("callee",e)}}(),i=a,u=!{toString:null}.propertyIsEnumerable("toString"),c=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],l=function(){return arguments.propertyIsEnumerable("length")}(),f=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1},d="function"!=typeof Object.keys||l?(0,r.A)((function(e){if(Object(e)!==e)return[];var t,n,r=[],s=l&&i(e);for(t in e)!(0,o.A)(t,e)||s&&"length"===t||(r[r.length]=t);if(u)for(n=c.length-1;n>=0;)t=c[n],(0,o.A)(t,e)&&!f(r,t)&&(r[r.length]=t),n-=1;return r})):(0,r.A)((function(e){return Object(e)!==e?[]:Object.keys(e)}))},7624:function(e,t,n){"use strict";n.d(t,{A:function(){return a}});var r=n(2028),o=Number.isInteger||function(e){return e<<0===e};var s=function(e,t){var n,r;if(null!=t)return o(e)?(r=t)[(n=e)<0?r.length+n:n]:t[e]},a=(0,r.A)(s)},6419:function(e,t,n){"use strict";var r=n(131),o=n(7624),s=n(2530),a=(0,r.A)((function(e,t,n){return(0,s.A)(e,(0,o.A)(t,n))}));t.A=a},9908:function(e,t,n){"use strict";var r=(0,n(8725).A)((function(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}));t.A=r},3529:function(e,t,n){"use strict";var r=n(6540),o=n(5702),s=n(1015);t.A=e=>{let{children:t,state:n,...a}=e;return r.createElement(o.Location,null,(e=>{let{location:o}=e;return r.createElement(s.N_,Object.assign({},a,{state:{previousUrl:o.href,...n}}),t)}))}},4286:function(e,t,n){"use strict";function r(e,t){return`${e} ${t}${1!==e?"s":""}`}n.d(t,{t:function(){return r}})},8078:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var r=n(6540),o=n(5164),s=n(3286),a=n(6419),i=n(9634),u=n.n(i),c=n(4286),l=n(5103),f=n(503),d=n(3529);function h(e,t){return"soundcheck"===e.values.whichSet?-1:"soundcheck"===t.values.whichSet?1:"set 1"===e.values.whichSet?-1:"set 1"===t.values.whichSet?1:"set 2"===e.values.whichSet?-1:"set 2"===t.values.whichSet?1:"set 3"===e.values.whichSet?-1:"set 3"===t.values.whichSet?1:"encore"===e.values.whichSet?-1:"encore"===t.values.whichSet?1:"double encore"===e.values.whichSet?-1:"double encore"===t.values.whichSet?1:void 0}const p={soundcheck:"soundcheck",set1:"set 1",set2:"set 2",set3:"set 3",encore1:"encore",encore2:"double encore"};function g(e){let{columns:t,data:n,previousUrl:s=""}=e;const{getTableProps:a,getTableBodyProps:i,headerGroups:c,rows:l,prepareRow:f}=(0,o.useTable)({columns:t,data:n},o.useSortBy);return r.createElement("table",Object.assign({},a(),{className:"sortable"}),r.createElement("thead",null,c.map((e=>r.createElement("tr",e.getHeaderGroupProps(),e.headers.map((e=>r.createElement("th",Object.assign({},e.getHeaderProps(e.getSortByToggleProps()),{className:`sortable__cell-${e.id} ${e.isSorted?e.isSortedDesc?"sorted-desc":"sorted-asc":""}`}),e.render("Header")))))))),r.createElement("tbody",i(),l.map((e=>(f(e),r.createElement("tr",Object.assign({},e.getRowProps(),{className:u()({[`stars-${e.original.stars}`]:e.original.stars})}),e.cells.map((e=>{const t=u()({blank:"[opener]"===e.value||"[closer]"===e.value,[`sortable__cell-${e.column.id}`]:!0});return r.createElement("td",Object.assign({},e.getCellProps(),{className:t}),function(e,t){let n,{column:o,render:s,row:a}=e;return void 0===t&&(t=""),"show"===o.id?n=`/show/${a.original.fullData.showData.id}`:"prior"===o.id&&a.original.fullData.prior.song_id?n=`/song/${a.original.fullData.prior.song_id}`:"after"===o.id&&a.original.fullData.after.song_id&&(n=`/song/${a.original.fullData.after.song_id}`),n?r.createElement(d.A,{to:n,className:u()({highlight:t.endsWith(n)})},s("Cell")):s("Cell")}(e,s))}))))))))}function A(e){var t;let{data:{songsCsv:n,allSeguesCsv:{nodes:o},allSetsCsv:{nodes:i},allShowsCsv:{nodes:A},allSongperformancesCsv:{nodes:v},allSongsCsv:{nodes:m},allTeasesCsv:{nodes:y}},location:w}=e;if(!n)return r.createElement("p",null,"Uh oh, no song data found...");const S=n.performances.split(":");if(!v.length)throw new Error("No data for allSongPerformances");if(!A.length)throw new Error("No data for allShows");if(!i.length)throw new Error("No data for allSets");if(!o.length)throw new Error("No data for allSegues");const b=(0,r.useMemo)((()=>{const e=new Map;for(const t of m)e.set(t.id,t);return e}),[m]),_=(0,r.useMemo)((()=>v.filter((e=>S.includes(e.id))).map((e=>{var t,r,u,c;const l=e.id.toString(),f=(0,s.A)((e=>e.setlist&&e.setlist.toString().split(":").includes(l)))(i);if(!f)throw new Error("No setData",{song:n,performanceData:e,allSets:i});const d=(0,s.A)((e=>[e.soundcheck,e.set1,e.set2,e.set3,e.encore1,e.encore2].includes(f.id)))(A);if(!d)throw new Error("No showData",{song:n,performanceData:e,setData:f,allShows:A});const h=String(f.setlist).split(":"),g=h.indexOf(l);let m,y;if(g>0){var w;const e=h[g-1];m=v.find((t=>t.id===e)),m.segue=(null===(w=(0,s.A)((0,a.A)(l,"to_perf_id"))(o))||void 0===w?void 0:w.type)||",";const t=b.get(m.song_id);t&&(m.song_name=t.nicknames||t.title)}else m={song_name:"[opener]"};if(g<h.length-1){var S;y=v.find((e=>e.id===h[g+1])),y.segue=(null===(S=(0,s.A)((0,a.A)(l,"from_perf_id"))(o))||void 0===S?void 0:S.type)||",";const e=b.get(y.song_id);e&&(y.song_name=e.nicknames||e.title)}else y={song_name:"[closer]"};const _=Object.entries(p).find((e=>{let[t,n]=e;return d[t]===f.id}))[1],E=!!e.variation&&`(${e.variation})`;return{show:d.date,prior:null===(t=m)||void 0===t?void 0:t.song_name,segue_prior:null===(r=m)||void 0===r?void 0:r.segue,title:n.nicknames.split("; ")[0]||n.title,stars:e.stars,segue_after:null===(u=y)||void 0===u?void 0:u.segue,after:null===(c=y)||void 0===c?void 0:c.song_name,whichSet:_,fullData:{performanceData:e,showData:d,variation:E,whichSet:_,prior:m,after:y}}}))),[v,S,i,A]),E=(0,r.useMemo)((()=>[{accessor:"show",Header:"show",sortType:(e,t)=>new Date(e.values.show).getTime()-new Date(t.values.show).getTime()},{accessor:"whichSet",Header:"where",sortType:h},{accessor:"prior",Header:"prior song"},{accessor:"segue_prior",Header:">"},{accessor:"title",disableSortBy:!0},{accessor:"segue_after",Header:">"},{accessor:"after",Header:"following song"}]),[]);return r.createElement(l.A,{className:"songpage"},r.createElement(f.A,{title:`"${n.title}" performed or teased by JRAD`,description:`List of each time Joe Russo's Almost Dead has performed or teased the song "${n.title}" ${n.author&&"traditional"!==n.author?`by ${n.author}`:""}`}),r.createElement("h1",{className:"songpage__name"},n.title),r.createElement("div",{className:"songpage__info"},function(e){switch(void 0===e&&(e=null),e){case null:case"":return!1;case"traditional":return r.createElement("p",null,"(traditional)");default:return r.createElement("p",null,"by ",e)}}(n.author),n.suite&&r.createElement("p",null,"Part of the ",n.suite," suite")),Boolean(_.length)&&r.createElement("div",{className:"songpage__performances"},r.createElement("h2",null,"Performed at ",(0,c.t)(_.length,"Show")),r.createElement(g,{data:_,columns:E,previousUrl:null==w||null===(t=w.state)||void 0===t?void 0:t.previousUrl})),Boolean(y.length)&&r.createElement("div",{className:"songpage__teases"},r.createElement("h2",null,"Teases / Jams"),r.createElement("ul",null,y.map((e=>{var t,n;const o=(0,s.A)((0,a.A)(e.performance_id,"id"))(v);if(null==o||!o.id)return!1;const c=(0,s.A)((e=>e.setlist.toString().split(":").includes(o.id.toString())))(i),l=(0,s.A)((e=>[e.soundcheck,e.set1,e.set2,e.set3,e.encore1,e.encore2].includes(c.id)))(A),f=`/show/${l.id}`;return r.createElement("li",{key:e.id,className:u()({highlight:null==w||null===(t=w.state)||void 0===t||null===(n=t.previousUrl)||void 0===n?void 0:n.endsWith(f)})},r.createElement(d.A,{to:f},l.date," within ",e.within," ",o.variation&&`(${o.variation})`))})))))}}}]);
//# sourceMappingURL=component---src-templates-song-js-3615b629810b6dc28719.js.map