(self.webpackChunkalmost_dead_net=self.webpackChunkalmost_dead_net||[]).push([[914],{5689:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var a=n(7294),i=n(5444),r=n(5871);function s(e,t,n){var a,i=typeof e;switch(i){case"string":case"number":return 0===e&&1/e==-1/0?!!n._items["-0"]||(t&&(n._items["-0"]=!0),!1):null!==n._nativeSet?t?(a=n._nativeSet.size,n._nativeSet.add(e),n._nativeSet.size===a):n._nativeSet.has(e):i in n._items?e in n._items[i]||(t&&(n._items[i][e]=!0),!1):(t&&(n._items[i]={},n._items[i][e]=!0),!1);case"boolean":if(i in n._items){var s=e?1:0;return!!n._items[i][s]||(t&&(n._items[i][s]=!0),!1)}return t&&(n._items[i]=e?[!1,!0]:[!0,!1]),!1;case"function":return null!==n._nativeSet?t?(a=n._nativeSet.size,n._nativeSet.add(e),n._nativeSet.size===a):n._nativeSet.has(e):i in n._items?!!(0,r.Z)(e,n._items[i])||(t&&n._items[i].push(e),!1):(t&&(n._items[i]=[e]),!1);case"undefined":return!!n._items[i]||(t&&(n._items[i]=!0),!1);case"object":if(null===e)return!!n._items.null||(t&&(n._items.null=!0),!1);default:return(i=Object.prototype.toString.call(e))in n._items?!!(0,r.Z)(e,n._items[i])||(t&&n._items[i].push(e),!1):(t&&(n._items[i]=[e]),!1)}}var l=function(){function e(){this._nativeSet="function"==typeof Set?new Set:null,this._items={}}return e.prototype.add=function(e){return!s(e,!0,this)},e.prototype.has=function(e){return s(e,!1,this)},e}(),o=(0,n(8980).Z)((function(e,t){for(var n,a,i=new l,r=[],s=0;s<t.length;)n=e(a=t[s]),i.add(n)&&r.push(a),s+=1;return r})),u=n(6973),c=n(2084),m=n(768),d=n(7703);var f={set1:"set 1",set2:"set 2",set3:"set 3",encore1:"encore",encore2:"double encore"};function _(e){var t=e.pageContext,n=t.song,r=t.shows,s=t.sets,l=t.songs,_=t.songPerformances,h=t.teases;if(!(n&&l&&_&&r&&h&&s))return a.createElement("p",null,"Loading...");var p=n;if(!p)return a.createElement("p",null,"Uh oh, no song data found...");var v=p.id,g=(0,u.Z)((0,c.Z)("song_id",v))(_),w=g.map((function(e){var t=e.id.toString(),n=(0,m.Z)((function(e){return e.setlist&&e.setlist.toString().split(":").includes(t)}))(Object.values(s));if(!n||!n.id)return console.warn("missing setData...",{performanceData:e,sets:s}),!1;var a=(0,m.Z)((function(e){return[e.set1,e.set2,e.set3,e.encore1,e.encore2].includes(n.id)}))(r);if(!a||!a.id)return console.warn("missing showData...",{performanceData:e,setData:n}),!1;var i=Object.entries(f).find((function(e){var t=e[0];e[1];return a[t]===n.id}))[1],l=!!e.variation&&"("+e.variation+")";return{performanceData:e,showData:a,variation:l,whichSet:i}})).filter((function(e){return!!e.showData})).sort((function(e,t){var n=new Date(e.showData.date.split("/")),a=new Date(t.showData.date.split("/"));return n>a?-1:n<a?1:0})),E=o((function(e){return e.showData.id}),w),S=w.map((function(e){var t=e.performanceData,n=e.showData,r=e.variation,s=e.whichSet;return a.createElement("li",{key:t.id},a.createElement(i.rU,{to:"/show/"+n.id},n.date," ",r," in ",s))})),D=g.length>0&&a.createElement(a.Fragment,null,a.createElement("h2",null,"Performed at ",E.length+" Show"+(1===E.length?"":"s")),a.createElement("ul",null,S)),Z=(0,u.Z)((0,c.Z)("song_id",v))(h),b=Z.length>0&&a.createElement(a.Fragment,null,a.createElement("h2",null,"Teases"),a.createElement("ul",null,Z.map((function(e){var t=(0,m.Z)((0,c.Z)("id",e.performance_id))(_),n=(0,m.Z)((function(e){return e.setlist.toString().split(":").includes(t.id.toString())}))(s),l=(0,m.Z)((function(e){return[e.set1,e.set2,e.set3,e.encore1,e.encore2].includes(n.id)}))(r);return a.createElement("li",{key:e.id},"within ",a.createElement(i.rU,{to:"/show/"+l.id},e.within," â€” ",l.date))}))));return a.createElement(d.Z,null,a.createElement("section",{className:"songpage"},a.createElement("h1",{className:"songpage__name"},p.title),a.createElement("div",{className:"songpage__info"},function(e){switch(void 0===e&&(e=null),e){case null:case"":return!1;case"traditional":return a.createElement("p",null,"(traditional)");default:return a.createElement("p",null,"by ",e)}}(p.author),p.suite&&a.createElement("p",null,"Part of the ",p.suite," suite")),a.createElement("div",{className:"songpage__performances"},D),a.createElement("div",{className:"songpage__teases"},b)))}}}]);
//# sourceMappingURL=component---src-pages-song-js-8a29dcd55cedb2e73978.js.map