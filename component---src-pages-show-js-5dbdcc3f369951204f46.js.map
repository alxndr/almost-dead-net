{"version":3,"sources":["webpack://almost-dead-net/./node_modules/ramda/es/sort.js","webpack://almost-dead-net/./src/pages/show.js"],"names":["comparator","list","Array","prototype","slice","call","sort","ShowRecordings","date","recordings","length","split","m","d","yyyy","className","map","type","url","Boolean","filter","includes","Guests","guests","guest","name","join","Set","show","which","isEncore","sets","performances","segues","teases","songs","setId","setData","find","propEq","setlist","normalizeSetlist","key","id","LeadImage","urls","src","startsWith","match","Show","pageContext","shows","venue","lastShowId","console","error","event","notes","links","guestsWithSplitShows","guestData","Number","isInteger","toString","data","showGuests","where","showRecordings","a","b","reduce","setlists","concat","encores","showName","location","title","description","to","slugify","soundcheck","href"],"mappings":"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","file":"component---src-pages-show-js-5dbdcc3f369951204f46.js","sourcesContent":["import _curry2 from \"./internal/_curry2.js\";\n/**\n * Returns a copy of the list, sorted according to the comparator function,\n * which should accept two values at a time and return a negative number if the\n * first value is smaller, a positive number if it's larger, and zero if they\n * are equal. Please note that this is a **copy** of the list. It does not\n * modify the original.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category List\n * @sig ((a, a) -> Number) -> [a] -> [a]\n * @param {Function} comparator A sorting function :: a -> b -> Int\n * @param {Array} list The list to sort\n * @return {Array} a new array with its elements sorted by the comparator function.\n * @example\n *\n *      const diff = function(a, b) { return a - b; };\n *      R.sort(diff, [4,2,7,5]); //=> [2, 4, 5, 7]\n */\n\nvar sort = /*#__PURE__*/_curry2(function sort(comparator, list) {\n  return Array.prototype.slice.call(list, 0).sort(comparator);\n});\n\nexport default sort;","import React, {useEffect, useState} from 'react'\nimport {filter, find, includes, propEq, sort, where} from 'ramda'\nimport {Link} from 'gatsby'\nimport slugify from 'slugify'\n\nimport SEO from \"../components/seo\"\nimport Layout from '../components/layout'\nimport Setlist from '../components/setlist'\nimport Recording from '../components/recording'\n\nimport {normalizeSetlist} from '../components/helpers/setlist-helper'\n\nimport './show.css'\n\nfunction ShowRecordings({date, recordings}) {\n  if (recordings.length) {\n    const [m, d, yyyy] = date.split('/')\n    return <section className=\"showpage__recordings\">\n      <h2>Recordings</h2>\n      <ul>\n        {recordings.map(({type, url}) => <Recording type={type} url={url} />)}\n        {Boolean(recordings.filter(({type}) => ['matrix', 'soundboard'].includes(type)).length) &&\n          <Recording type={'audio'} url={`https://relisten.net/jrad/${yyyy}/${m < 10 ? `0${m}` : m}/${d < 10 ? `0${d}` : d}`} />\n        }\n      </ul>\n    </section>\n  }\n  return false\n}\n\nfunction Guests({guests}) {\n  if (guests.length) {\n    return <p>With {guests.map((guest) => guest.name).join(', ')}</p>\n  }\n  return false\n}\n\nfunction Set({show, which, isEncore = false, sets, performances, segues, teases, songs}) {\n  const what = which === 'soundcheck'\n    ? 'soundcheck'\n    : `${isEncore ? 'encore' : 'set'}${which}`\n  const setId = show[what]\n  if (!setId || !sets || !sets.length) {\n    return false\n  }\n  const setData = find(propEq('id', setId))(sets)\n  const setlist = normalizeSetlist(setData.setlist)\n  return <Setlist\n    isEncore={isEncore}\n    which={which}\n    key={setData.id}\n    setlist={setlist}\n    performances={performances}\n    segues={segues}\n    songs={songs}\n    teases={teases}\n  />\n}\n\nfunction LeadImage({urls}) {\n  const src = find((url) => url.startsWith('https://lot.almost-dead.net/uploads/') || url.match(/imgur/))(urls)\n  return <div className=\"showpage__leadimage\">\n    <img src={src} />\n  </div>\n}\n\nexport default function Show({pageContext: {show, shows, sets, venue, guests, recordings, performances, segues, songs, teases, lastShowId}}) {\n  if (!show) {\n    console.error('Show page, missing show..............')\n    return false\n  }\n\n  const {date, event, notes, links} = show\n\n  const guestsWithSplitShows = guests.map((guestData) => {\n    if (!guestData) {\n      return null\n    }\n    if (!guestData.shows) {\n      return null\n    }\n    if (Number.isInteger(guestData.shows)) {\n      return {\n        ...guestData,\n        shows: [guestData.shows.toString()]\n      }\n    }\n    return {\n      ...guestData,\n      shows: guestData.shows.split(':')\n    }\n  }).filter((data) => !!data)\n  const showGuests = filter(where({shows: includes(show.id)}))(guestsWithSplitShows)\n\n  const showRecordings = sort((a, b) => {\n    if (a.type === b.type) return 0;\n    if (a.type === 'pro-shot') return -1;\n    if (b.type === 'pro-shot') return 1;\n    if (a.type === 'matrix') return -1;\n    if (b.type === 'matrix') return 1;\n    if (a.type === 'video') return -1;\n    if (b.type === 'video') return 1;\n    if (a.type === 'soundboard') return -1;\n    if (b.type === 'soundboard') return 1;\n    if (a.type === 'audience') return -1;\n    if (b.type === 'audience') return 1;\n    console.error('cannot sort recordings......', {a, b})\n  })(recordings)\n\n  const setlist = [1, 2, 3].reduce((setlists, which) => setlists.concat(\n    <Set which={which} show={show} performances={performances} sets={sets} segues={segues} teases={teases} songs={songs} />\n  ), [])\n  const encores = [1, 2].reduce((encores, which) => encores.concat(\n    <Set isEncore={true} which={which} show={show} performances={performances} sets={sets} segues={segues} teases={teases} songs={songs} />\n  ), [])\n\n  const showName = `${event ? `${event}, ` : ``}${venue.name} (${venue.location})`\n\n  return <Layout className=\"showpage\">\n    <SEO\n      title={`JRAD ${date} @ ${showName}`}\n      description={`Joe Russo's Almost Dead${showGuests.length ? ` with ${showGuests.map((guest) => guest.name).join(' and ')}` : ''} at ${showName} ${date} â€” setlist, teases, recordings`}\n    />\n    <h1 className=\"showpage__pagetitle\">\n      <span className=\"showpage__pagetitle--band\">Joe Russo's Almost Dead</span> {' '}\n      <span className=\"showpage__pagetitle--date\">{date}</span> {' '}\n      {event && <span className=\"showpage__pagetitle--event\">{event}</span>} {' '}\n      {venue && <span className=\"showpage__pagetitle--venue\"> {' '}\n        <Link to={`/venue/${venue.id}-${slugify(venue.name)}`}>\n          {venue.name}, {venue.location}\n        </Link>\n      </span>} {' '}\n      <span className=\"showpage__pagetitle--number\">show #{show.id}</span>\n    </h1>\n    <section className=\"showpage__setlist\">\n      {links && <LeadImage urls={links.split(/\\s+/)} />}\n      {notes && <div className=\"showpage__notes\">{notes}</div>}\n      <Guests guests={showGuests} />\n      {show.soundcheck && <Set which=\"soundcheck\" show={show} performances={performances} sets={sets} segues={segues} teases={teases} songs={songs} />}\n      {setlist.length ? setlist : <p>Uh oh, no sets found.</p>}\n      {encores.length && encores}\n    </section>\n    <ShowRecordings recordings={showRecordings} date={date} />\n    <nav className=\"showpage__nav\">\n      {Number(show.id) > 1 && <a href={`/show/${Number(show.id) - 1}`} className=\"showpage__nav__prev\" title=\"previous show\">Prior show</a>}\n      {Number(show.id) < Number(lastShowId) && <a href={`/show/${Number(show.id) + 1}`} className=\"showpage__nav__next\" title=\"following show\">Next show</a>}\n    </nav>\n  </Layout>\n}\n"],"sourceRoot":""}