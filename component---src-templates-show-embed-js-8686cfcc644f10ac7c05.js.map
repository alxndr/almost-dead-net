{"version":3,"file":"component---src-templates-show-embed-js-8686cfcc644f10ac7c05.js","mappings":"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","sources":["webpack://almost-dead-net/./src/templates/show-embed.js"],"sourcesContent":["import React from 'react'\nimport {filter, find, includes, propEq, where} from 'ramda'\nimport {graphql} from 'gatsby'\nimport {Helmet} from 'react-helmet'\n\nimport SEO from \"../components/seo\"\nimport Setlist from '../components/setlist'\n\nimport {normalizeSetlist} from '../components/helpers/setlist-helper'\n\nimport './show-embed.css'\n\nfunction Guests({guests}) {\n  if (guests.length) {\n    return <p>With {guests.map((guest) => guest.name).join(', ')}</p>\n  }\n  return false\n}\n\nfunction Set({show, which, isEncore = false, sets, performances, segues, teases, songs}) {\n  const what = which === 'soundcheck'\n    ? 'soundcheck'\n    : `${isEncore ? 'encore' : 'set'}${which}`\n  const setId = show[what]\n  if (!setId || !sets || !sets.length) {\n    return false\n  }\n  const setData = find(propEq(setId, 'id'))(sets)\n  const setlist = normalizeSetlist(setData.setlist)\n  return <Setlist\n    isEncore={isEncore}\n    which={which}\n    key={setData.id}\n    setlist={setlist}\n    performances={performances}\n    segues={segues}\n    songs={songs}\n    teases={teases}\n  />\n}\n\nexport default function ShowEmbed({data: {\n  showsCsv: show,\n  venuesCsv: venue,\n  allSetsCsv: {nodes: sets},\n  allGuestsCsv: {nodes: guests},\n  allSongperformancesCsv: {nodes: performances},\n  allSeguesCsv: {nodes: segues},\n  allSongsCsv: {nodes: songs},\n  allTeasesCsv: {nodes: teases},\n}}) {\n  if (!show) {\n    console.error('Show page, missing show..............')\n    return false\n  }\n\n  const {date, event, notes} = show\n\n  const guestsWithSplitShows = guests.map((guestData) => {\n    if (!guestData) {\n      return null\n    }\n    if (!guestData.shows) {\n      return null\n    }\n    if (Number.isInteger(guestData.shows)) {\n      return {\n        ...guestData,\n        shows: [guestData.shows.toString()]\n      }\n    }\n    return {\n      ...guestData,\n      shows: guestData.shows.split(':')\n    }\n  }).filter((data) => !!data)\n  const showGuests = filter(where({shows: includes(show.id)}))(guestsWithSplitShows)\n\n  const setlist = [1, 2, 3].reduce((setlists, which) => setlists.concat(\n    <Set which={which} show={show} performances={performances} sets={sets} segues={segues} teases={teases} songs={songs} />\n  ), [])\n  const encores = [1, 2].reduce((encores, which) => encores.concat(\n    <Set isEncore={true} which={which} show={show} performances={performances} sets={sets} segues={segues} teases={teases} songs={songs} />\n  ), [])\n\n  const showName = `${event ? `${event}, ` : ``}${venue.name} (${venue.location})`\n\n  return <div className=\"showpage-embed\">\n    <SEO\n      title={`JRAD ${date} @ ${showName}`}\n      description={`Joe Russo's Almost Dead${showGuests.length ? ` with ${showGuests.map((guest) => guest.name).join(' and ')}` : ''} at ${showName} ${date} â€” setlist, teases, recordings`}\n    />\n    <Helmet>\n      <link rel=\"canonical\" href={`/show/${show.id}`} />\n    </Helmet>\n    <h1 className=\"showpage__pagetitle\">\n      <span className=\"showpage__pagetitle--date\">{date}</span>\n      {' '}\n      {event && <span className=\"showpage__pagetitle--event\">{event}</span>}\n      {' '}\n      {venue && <span className=\"showpage__pagetitle--venue\">{venue.name}, {venue.location}</span>}\n    </h1>\n    <section className=\"showpage__setlist\">\n      <Guests guests={showGuests} />\n      {show.soundcheck && <Set which=\"soundcheck\" show={show} performances={performances} sets={sets} segues={segues} teases={teases} songs={songs} />}\n      {setlist.length ? setlist : <p>Uh oh, no sets found.</p>}\n      {encores.length && encores}\n      {notes && <div className=\"showpage__notes\">{notes}</div>}\n    </section>\n  </div>\n}\n\nexport const query = graphql`\n  query($showId: String!, $venueId: String!) {\n    showsCsv(id: {eq: $showId}) {\n      id\n      date\n      encore1\n      encore2\n      event\n      notes\n      set1\n      set2\n      set3\n    }\n    venuesCsv(id: {eq: $venueId}) {\n      id\n      location\n      name\n    }\n    allSetsCsv { nodes {\n      id\n      setlist\n    }}\n    allGuestsCsv { nodes {\n      id\n      name\n      shows\n    } }\n    allSongperformancesCsv { nodes {\n      id\n      next_perfid\n      notes\n      prev_perfid\n      showgap\n      song_id\n      variation\n    } }\n    allSongsCsv { nodes {\n      id\n      author\n      core_gd\n      core_jrad\n      suite\n      title\n    } }\n    allSeguesCsv { nodes {\n      id\n      from_perf_id\n      type\n    } }\n    allTeasesCsv { nodes {\n      id\n      performance_id\n      song_name\n    } }\n  }\n`\n"],"names":["Guests","_ref","guests","length","React","map","guest","name","join","Set","_ref2","show","which","isEncore","sets","performances","segues","teases","songs","setId","setData","find","propEq","setlist","normalizeSetlist","Setlist","key","id","ShowEmbed","_ref3","data","showsCsv","venuesCsv","venue","allSetsCsv","nodes","allGuestsCsv","allSongperformancesCsv","allSeguesCsv","allSongsCsv","allTeasesCsv","console","error","date","event","notes","guestsWithSplitShows","guestData","shows","Number","isInteger","toString","split","filter","showGuests","where","includes","reduce","setlists","concat","encores","showName","location","className","SEO","title","description","Helmet","rel","href","soundcheck"],"sourceRoot":""}