/*! For license information please see component---src-templates-song-js-f1d64a6f6092a40a2cbf.js.LICENSE.txt */
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[823],{8220:function(e,t){var r;!function(){"use strict";var o={}.hasOwnProperty;function s(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=a(e,n(r)))}return e}function n(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return s.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var r in e)o.call(e,r)&&e[r]&&(t=a(t,r));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(s.default=s,e.exports=s):void 0===(r=function(){return s}.apply(t,[]))||(e.exports=r)}()},4964:function(e,t,r){"use strict";var o=r(1504),s=r(2004),n=r(9756);t.c=e=>{let{children:t,state:r,...a}=e;return o.createElement(s.Location,null,(e=>{let{location:s}=e;return o.createElement(n.cH,Object.assign({},a,{state:{previousUrl:s.href,...r}}),t)}))}},5436:function(e,t,r){"use strict";function o(e,t){return e+" "+t+(1!==e?"s":"")}r.d(t,{u:function(){return o}})},4232:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var o=r(1504),s=r(8008),n=r(5420),a=r(8220),l=r.n(a),i=r(5436),c=r(1264),u=r(6320),d=r(4964);function h(e,t){return"soundcheck"===e.values.whichSet?-1:"soundcheck"===t.values.whichSet?1:"set 1"===e.values.whichSet?-1:"set 1"===t.values.whichSet?1:"set 2"===e.values.whichSet?-1:"set 2"===t.values.whichSet?1:"set 3"===e.values.whichSet?-1:"set 3"===t.values.whichSet?1:"encore"===e.values.whichSet?-1:"encore"===t.values.whichSet?1:"double encore"===e.values.whichSet?-1:"double encore"===t.values.whichSet?1:void 0}const g={soundcheck:"soundcheck",set1:"set 1",set2:"set 2",set3:"set 3",encore1:"encore",encore2:"double encore"};function f(e){let{columns:t,data:r,previousUrl:n=""}=e;const{getTableProps:a,getTableBodyProps:i,headerGroups:c,rows:u,prepareRow:h}=(0,s.useTable)({columns:t,data:r},s.useSortBy);return o.createElement("table",Object.assign({},a(),{className:"sortable"}),o.createElement("thead",null,c.map((e=>o.createElement("tr",e.getHeaderGroupProps(),e.headers.map((e=>o.createElement("th",Object.assign({},e.getHeaderProps(e.getSortByToggleProps()),{className:"sortable__cell-"+e.id+" "+(e.isSorted?e.isSortedDesc?"sorted-desc":"sorted-asc":"")}),e.render("Header")))))))),o.createElement("tbody",i(),u.map((e=>(h(e),o.createElement("tr",Object.assign({},e.getRowProps(),{className:l()({["stars-"+e.original.stars]:e.original.stars})}),e.cells.map((e=>{const t=l()({blank:"[opener]"===e.value||"[closer]"===e.value,["sortable__cell-"+e.column.id]:!0});return o.createElement("td",Object.assign({},e.getCellProps(),{className:t}),function(e,t){let r,{column:s,render:n,row:a}=e;return void 0===t&&(t=""),"show"===s.id?r="/show/"+a.original.fullData.showData.id:"prior"===s.id&&a.original.fullData.prior.song_id?r="/song/"+a.original.fullData.prior.song_id:"after"===s.id&&a.original.fullData.after.song_id&&(r="/song/"+a.original.fullData.after.song_id),r?o.createElement(d.c,{to:r,className:l()({highlight:t.endsWith(r)})},n("Cell")):n("Cell")}(e,n))}))))))))}function p(e){var t;let{data:{songsCsv:r,allSeguesCsv:{nodes:s},allSetsCsv:{nodes:a},allShowsCsv:{nodes:p},allSongperformancesCsv:{nodes:m},allTeasesCsv:{nodes:v}},location:w}=e;if(!r)return o.createElement("p",null,"Uh oh, no song data found...");const S=r.performances.split(":");if(!m.length)throw new Error("No data for allSongPerformances");if(!p.length)throw new Error("No data for allShows");if(!a.length)throw new Error("No data for allSets");if(!s.length)throw new Error("No data for allSegues");const _=m.filter((e=>S.includes(e.id))).map((e=>{var t,o,l,i;const c=e.id.toString(),u=(0,n.iwi)((e=>e.setlist&&e.setlist.toString().split(":").includes(c)))(a);if(!u)throw new Error("No setData",{song:r,performanceData:e,allSets:a});const d=(0,n.iwi)((e=>[e.soundcheck,e.set1,e.set2,e.set3,e.encore1,e.encore2].includes(u.id)))(p);if(!d)throw new Error("No showData",{song:r,performanceData:e,setData:u,allShows:p});const h=String(u.setlist).split(":"),f=h.indexOf(c);let v,w;if(f>0){var S;const e=h[f-1];v=m.find((t=>t.id===e)),v.segue=(null===(S=(0,n.iwi)((0,n.eAo)("to_perf_id",c))(s))||void 0===S?void 0:S.type)||","}else v={song_name:"[opener]"};var _;f<h.length-1?(w=m.find((e=>e.id===h[f+1])),w.segue=(null===(_=(0,n.iwi)((0,n.eAo)("from_perf_id",c))(s))||void 0===_?void 0:_.type)||","):w={song_name:"[closer]"};const E=Object.entries(g).find((e=>{let[t,r]=e;return d[t]===u.id}))[1],b=!!e.variation&&"("+e.variation+")";return{show:d.date,prior:null===(t=v)||void 0===t?void 0:t.song_name,segue_prior:null===(o=v)||void 0===o?void 0:o.segue,title:r.nicknames.split("; ")[0]||r.title,stars:e.stars,segue_after:null===(l=w)||void 0===l?void 0:l.segue,after:null===(i=w)||void 0===i?void 0:i.song_name,whichSet:E,fullData:{performanceData:e,showData:d,variation:b,whichSet:E,prior:v,after:w}}})),E=(0,o.useMemo)((()=>_),[]),b=(0,o.useMemo)((()=>[{accessor:"show",Header:"show",sortType:(e,t)=>new Date(e.values.show).getTime()-new Date(t.values.show).getTime()},{accessor:"whichSet",Header:"where",sortType:h},{accessor:"prior",Header:"prior song"},{accessor:"segue_prior",Header:">"},{accessor:"title",disableSortBy:!0},{accessor:"segue_after",Header:">"},{accessor:"after",Header:"following song"}]),[]);return o.createElement(c.c,{className:"songpage"},o.createElement(u.c,{title:'"'+r.title+'" performed or teased by JRAD',description:"List of each time Joe Russo's Almost Dead has performed or teased the song \""+r.title+'" '+(r.author&&"traditional"!==r.author?"by "+r.author:"")}),o.createElement("h1",{className:"songpage__name"},r.title),o.createElement("div",{className:"songpage__info"},function(e){switch(void 0===e&&(e=null),e){case null:case"":return!1;case"traditional":return o.createElement("p",null,"(traditional)");default:return o.createElement("p",null,"by ",e)}}(r.author),r.suite&&o.createElement("p",null,"Part of the ",r.suite," suite")),Boolean(E.length)&&o.createElement("div",{className:"songpage__performances"},o.createElement("h2",null,"Performed at ",(0,i.u)(E.length,"Show")),o.createElement(f,{data:E,columns:b,previousUrl:null==w||null===(t=w.state)||void 0===t?void 0:t.previousUrl})),Boolean(v.length)&&o.createElement("div",{className:"songpage__teases"},o.createElement("h2",null,"Teases / Jams"),o.createElement("ul",null,v.map((e=>{var t,r;const s=(0,n.iwi)((0,n.eAo)("id",e.performance_id))(m);if(null==s||!s.id)return!1;const i=(0,n.iwi)((e=>e.setlist.toString().split(":").includes(s.id.toString())))(a),c=(0,n.iwi)((e=>[e.soundcheck,e.set1,e.set2,e.set3,e.encore1,e.encore2].includes(i.id)))(p),u="/show/"+c.id;return o.createElement("li",{key:e.id,className:l()({highlight:null==w||null===(t=w.state)||void 0===t||null===(r=t.previousUrl)||void 0===r?void 0:r.endsWith(u)})},o.createElement(d.c,{to:u},c.date," within ",e.within," ",s.variation&&"("+s.variation+")"))})))))}}}]);
//# sourceMappingURL=component---src-templates-song-js-f1d64a6f6092a40a2cbf.js.map